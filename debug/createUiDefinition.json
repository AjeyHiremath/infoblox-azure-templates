{
  "handler": "Microsoft.Compute.MultiVm",
  "version": "0.0.1-preview",
  "parameters": {
    "basics": [
      {
        "name": "niosModel",
        "type": "Microsoft.Common.DropDown",
        "label": "NIOS model",
        "defaultValue": "TE-V1420 (Standard DS3)",
        "toolTip": "Select the NIOS model to load on the new VM",
        "constraints": {
          "allowedValues": [
            {
              "label": "TE-V820 (Standard DS2)",
              "value": "vnios-te-v820"
            },
            {
              "label": "TE-V1420 (Standard DS3)",
              "value": "vnios-te-v1420"
            },
            {
              "label": "TE-V2220 (Standard DS3)",
              "value": "vnios-te-v2200"
            },
            {
              "label": "CP-V800 (Standard DS2)",
              "value": "vnios-cp-v800"
            },
            {
              "label": "CP-V1400 (Standard DS3)",
              "value": "vnios-cp-v1400"
            },
            {
              "label": "CP-V2200 (Standard DS3)",
              "value": "vnios-cp-v2200"
            }
          ]
        },
        "visible": true
      }
    ],
    "steps": [{
      "name": "vmSettings",
      "label": "VM Settings",
      "bladeTitle": "NIOS VM settings",
      "subLabel": {
        "preValidation": "Configure VM Settings",
        "postValidation": "Done"
      },
      "elements": [
        {
          "name": "niosVersion-vnios-te-v820",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for TE-V820",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-te-v820')]"
        },
        {
          "name": "niosVersion-vnios-te-v1420",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for TE-V1420",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-te-v1420')]"
        },
        {
          "name": "niosVersion-vnios-te-v2220",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for TE-V2220",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-te-v2220')]"
        },
        {
          "name": "niosVersion-vnios-cp-v800",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for CP-V800",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-cp-v800')]"
        },
        {
          "name": "niosVersion-vnios-cp-v1400",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for CP-V1400",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-cp-v1400')]"
        },
        {
          "name": "niosVersion-vnios-cp-v2200",
          "type": "Microsoft.Common.DropDown",
          "label": "NIOS version for CP-V2200",
          "defaultValue": "7.4.0",
          "toolTip": "Select the version of NIOS to load",
          "constraints": {
            "allowedValues": [
              {
                "label": "7.4.0",
                "value": "7.4.0"
              }
            ]
          },
          "visible": "[equals(basics('niosModel'), 'vnios-cp-v2200')]"
        }

      ]
    }],
    "outputs": {
      "vmName": "[basics('vmName')]",
      "niosModel": "[basics('niosModel')]",
      "niosVersion":  "[steps('vmSettings').niosVersion-vnios-te-v820]"
    }
  }
}